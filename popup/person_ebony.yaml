action: fire-dom-event
browser_mod:
  command: popup
  title: Ebony
  style:
    hui-vertical-stack-card:
      $hui-history-graph-card$: |
        .content {
          padding: 0.2em 1em 1.2em 1.7em !important;
        }
      $: |
        button-card {
          align-self: center;
          padding: 0.5em 0 0.5em 0;
        }
  card:
    type: vertical-stack
    cards:
      - type: entities
        card_mod:
          class: content
        entities:
          - entity: person.ebony
            secondary_info: none

      - type: history-graph
        entities:
          - entity: person.ebony
        hours_to_show: 24
        refresh_interval: 0
        
      - type: custom:button-card
        entity: person.ebony
        name: "Last Change:"
        icon: mdi:map-marker-alert-outline
        template: icon_name_last_changed

      - type: custom:button-card
        entity: device_tracker.ebonycom
        name: "Last Update:"
        icon: mdi:map-marker-alert-outline
        template: icon_name_last_changed

      - type: glance
        show_state: false
        entities:
          - entity: device_tracker.ebonycom
            name: Home
            icon: mdi:home
            style: &state |
              state-badge {
                color: {{ '#3182b7' if is_state(config.entity, 'home') else '#3c3f3f' }};
              }

          - entity: binary_sensor.ebonycom_is_charging
            name: Charging
            icon: mdi:power-plug
            style: |
              state-badge {
                color: {{ '#3182b7' if is_state(config.entity, 'on') else '#3c3f3f' }};
              }

          - entity: binary_sensor.ebonycom_wifi_state
            name: WIFI
            icon: mdi:wifi
            style: |
              state-badge {
                color: {{ '#3182b7' if is_state(config.entity, 'on') else '#3c3f3f' }};
              }

      - type: map
        default_zoom: 16
        dark_mode: true
        hours_to_show: 4
        entities:
          - device_tracker.ebonycom
