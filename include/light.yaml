light:
  - platform: template
    lights:
      selected_light:
        friendly_name: "Selected Light"
        unique_id: "light.selected_light"
        # level_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int / 255 * 100) | int }}"
        level_template: "{{ state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int }}"
        # value_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int / 255 * 100) | int > 0 }}"
        value_template: "{{ state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int > 0 }}"
        temperature_template: "{{ state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'color_temp') | int }}"
        # temperature_template: "{{states('input_number.light_temperature_input') | int}}"
        color_template: "({{states('input_number.h_light_input') | int}}, {{states('input_number.s_light_input') | int}})"
        # color_template: "{{ state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'hs_color') | float}}"
        turn_on:
          service: light.turn_on
          data_template:
            entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
        turn_off:
          service: light.turn_off
          data_template:
            entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
        set_level:
          service: light.turn_on
          data_template:
            entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
            brightness_pct: "{{ (brightness / 255) * 100 | round (2) }}"
        set_temperature:
          - service: input_number.set_value
            data:
              value: "{{ color_temp }}"
              entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
          - service: light.turn_on
            data_template:
              entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
              brightness: "{{ brightness }}"
              color_temp: "{{ color_temp }}"
        set_white_value:
          service: input_number.set_value
          data:
            value: "{{ white_value }}"
            entity_id: input_number.white_value_input
        # set_color:
        #   service: light.turn_on
        #   data_template:
        #     entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
        #     hs_color: "{{ hs_color }}"
        set_color:
          - service: input_number.set_value
            data:
              value: "{{ h }}"
              entity_id: input_number.h_light_input
          - service: input_number.set_value
            data:
              value: "{{ s }}"
              entity_id: input_number.s_light_input
          - service: light.turn_on
            data_template:
              entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
              # transition: "{{ transition | float }}"
              hs_color:
                - "{{ hs[0] }}"
                - "{{ hs[1] }}"
            # hs_color:
            # - "{{ hs[0] }}"
            # - "{{ hs[1] }}"

          # data:
          #   value: "{{ hs_color }}"
          #   entity_id: input_number.light_temperature_input
          # - service: input_number.set_value
          #   data:
          #     value: "{{ h }}"
          #     entity_id: input_number.h_light_input
          # - service: input_number.set_value
          #   data:
          #     value: "{{ s }}"
          #     entity_id: input_number.s_light_input
          # - service: light.turn_on
          # data_template:
          #   entity_id: "light.{{ (states('input_select.selectable_light').lower()) }}"
          #   hs_color:
          #     - "{{ hs[0] }}"
          #     - "{{ hs[1] }}"

      selected_room:
        friendly_name: "Selected Room"
        unique_id: "light.selected_room"
        # level_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int / 255 * 100) | int }}"
        level_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights', 'brightness')) | int }}"
        # value_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_light').lower())), 'brightness') | int / 255 * 100) | int > 0 }}"
        value_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights', 'brightness')) | int > 0 }}"
        temperature_template: "{{ (state_attr(('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights', 'color_temp')) | int }}"
        # temperature_template: "{{states('input_number.room_temperature_input') | int}}"
        color_template: "({{states('input_number.h_room_input') | int }}, {{states('input_number.s_room_input') | int }})"
        turn_on:
          service: light.turn_on
          data_template:
            entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
        turn_off:
          service: light.turn_off
          data_template:
            entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
        set_level:
          service: light.turn_on
          data_template:
            entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
            brightness_pct: "{{ (brightness / 255) * 100 | round (2) }}"
        set_temperature:
          - service: input_number.set_value
            data:
              value: "{{ color_temp }}"
              entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
          - service: light.turn_on
            data_template:
              entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
              brightness: "{{ brightness }}"
              color_temp: "{{ color_temp }}"
        set_white_value:
          service: input_number.set_value
          data:
            value: "{{ white_value }}"
            entity_id: input_number.room_white_value_input
        set_color:
          - service: input_number.set_value
            data:
              value: "{{ h }}"
              entity_id: input_number.h_room_input
          - service: input_number.set_value
            data:
              value: "{{ s }}"
              entity_id: input_number.s_room_input
          - service: light.turn_on
            data_template:
              entity_id: "{{ ('light.' ~ (states('input_select.selectable_room').lower())) | replace(' ', '_') ~'_lights' }}"
              # transition: "{{ transition | float }}"
              hs_color:
                - "{{ hs[0] }}"
                - "{{ hs[1] }}"

  - platform: switch
    name: "Lightning Red"
    entity_id: switch.lightning_red

  - platform: switch
    name: "Lightning Purple 1"
    entity_id: switch.lightning_purple_1

  - platform: switch
    name: "Lightning Purple 2"
    entity_id: switch.lightning_purple_2

  # - platform: switch
  #   name: "Lamp"
  #   entity_id: switch.lamp

  - platform: group
    name: All Lights
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.hallway
      - light.bedroom
      - light.bed
      - light.bathroom
      - light.lightning_red
      - light.lightning_purple_1
      - light.lightning_purple_2

  - platform: group
    name: All Lights Except Lightning Bolts
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.closet
      - light.hallway
      - light.bedroom
      - light.bed
      - light.bathroom

  - platform: group
    name: All Lights Except Lightning Bolts And Closet
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.hallway
      - light.bedroom
      - light.bed
      - light.bathroom

  - platform: group
    name: All Lights Except Closet
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.hallway
      - light.bedroom
      - light.bed
      - light.bathroom
      - light.lightning_red
      - light.lightning_purple_1
      - light.lightning_purple_2

  - platform: group
    name: All Lights Including Closet
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.hallway
      - light.bedroom
      - light.bed
      - light.bathroom
      - light.lightning_red
      - light.lightning_purple_1
      - light.lightning_purple_2
      - light.closet

  - platform: group
    name: Living Room And Kitchen Lights
    entities:
      - light.chandelier
      - light.tv
      - light.kitchen_east
      - light.kitchen_west

  - platform: group
    name: Living Room Lights
    entities:
      - light.chandelier
      - light.tv

  - platform: group
    name: Kitchen Lights
    entities:
      - light.kitchen_east
      - light.kitchen_west

  - platform: group
    name: Bedroom Lights
    entities:
      - light.bedroom
      - light.bed

  - platform: group
    name: LIFX
    entities:
      - light.chandelier
      - light.hallway
      - light.tv
      - light.kitchen_east
      - light.kitchen_west
      - light.closet
      - light.bedroom

  - platform: group
    name: Lightning Bolts
    entities:
      - light.lightning_red
      - light.lightning_purple_1
      - light.lightning_purple_2

  - platform: group
    name: Govee
    entities:
      - light.bed
      - light.bathroom

  - platform: group
    name: LED Strips
    entities:
      - light.tv
      - light.bed
      - light.bathroom

  - platform: group
    name: test
    entities:
      - light.hallway
      - light.kitchen_east